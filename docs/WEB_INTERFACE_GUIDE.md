# Web界面使用指南

## 快速开始

### 1. 启动Web界面

```bash
npm run start:web
```

### 2. 打开浏览器

访问：`http://localhost:3000`

## 界面说明

### 左侧配置面板

#### 配置设置
- **输出目录**：选择图片保存的文件夹路径
- **每个餐馆最大图片数**：限制每个餐馆下载的图片数量
- **请求间隔**：设置请求之间的延迟时间（毫秒）

**注意**：智能去除水印、图片后处理、无头模式等高级选项已默认启用，无需手动配置。

#### 餐馆配置
- **添加餐馆**：点击"添加"按钮添加新的餐馆
- **批量导入**：支持JSON和CSV格式批量导入
- **编辑/删除**：可以随时编辑或删除已添加的餐馆

#### 控制按钮
- **开始下载**：开始批量下载任务
- **暂停**：暂停当前任务
- **停止**：停止当前任务
- **保存配置**：保存当前配置到文件
- **加载配置**：从文件加载之前保存的配置

### 右侧进度面板

#### 下载进度
- **总体进度条**：显示整体下载进度
- **当前处理**：显示正在处理的餐馆信息
- **状态**：显示当前任务状态（待机/运行中/已暂停）
- **各餐馆进度**：显示每个餐馆的详细进度，包括：
  - 餐馆名称和地点
  - 当前状态（等待中/处理中/已完成/失败）
  - 进度条显示完成百分比
  - 图片下载数量统计

#### 统计信息
- **总餐馆数**：配置的餐馆总数
- **已完成**：已处理完成的餐馆数
- **总图片数**：找到的图片总数
- **已下载**：成功下载的图片数

#### 实时日志
- **日志显示**：详细的处理日志信息
- **级别过滤**：可以按信息/成功/警告/错误过滤日志
- **清空日志**：清空当前显示的日志

## 使用流程

### 1. 配置餐馆信息
1. 点击"添加"按钮
2. 输入餐馆名称和地点
3. 设置最大图片数（可选）
4. 点击"保存"

### 2. 设置下载选项
1. 选择输出目录
2. 设置每个餐馆的最大图片数
3. 设置请求间隔（建议2000毫秒以上）

### 3. 开始下载
1. 点击"开始下载"按钮
2. 首次使用会自动打开浏览器进行登录
3. 登录完成后开始自动下载
4. 实时查看进度和日志

### 4. 监控进度
- 观察总体进度条了解整体完成情况
- 查看各餐馆进度了解每个餐馆的处理状态
- 观察统计信息了解下载数量
- 查看实时日志了解详细处理状态
- 如有错误，查看错误日志进行排查

## 批量导入格式

### JSON格式
```json
[
  {
    "name": "海底捞",
    "location": "北京朝阳区",
    "maxImages": 20
  },
  {
    "name": "星巴克",
    "location": "上海徐汇区",
    "maxImages": 15
  }
]
```

### CSV格式
```csv
海底捞,北京朝阳区,20
星巴克,上海徐汇区,15
麦当劳,深圳南山区,25
```

## 注意事项

1. **首次使用**：需要手动登录小红书账号，登录成功后Cookie会自动保存
2. **网络环境**：确保网络连接稳定，建议使用代理服务器
3. **存储空间**：确保有足够的磁盘空间存储下载的图片
4. **请求频率**：建议设置适当的请求间隔，避免对服务器造成过大压力
5. **合规使用**：请遵守小红书的服务条款，仅用于个人学习和研究目的

## 故障排除

### 常见问题

1. **无法启动服务器**
   - 检查端口3000是否被占用
   - 确认已安装所有依赖包：`npm install`

2. **登录失败**
   - 检查网络连接
   - 尝试清除浏览器缓存
   - 确认小红书账号状态正常

3. **下载失败**
   - 检查输出目录权限
   - 确认磁盘空间充足
   - 查看错误日志了解具体原因

4. **界面无法访问**
   - 确认服务器已启动
   - 检查防火墙设置
   - 尝试使用不同浏览器

### 获取帮助

如果遇到问题，请：
1. 查看实时日志中的错误信息
2. 检查README.md中的详细说明
3. 确认配置是否正确
4. 尝试重启服务器

## 技术特性

- **实时通信**：使用WebSocket实现实时状态更新
- **响应式设计**：适配不同屏幕尺寸
- **错误处理**：完善的错误处理和恢复机制
- **配置管理**：支持配置保存和加载
- **并发控制**：智能控制并发数量，避免服务器压力
- **日志系统**：详细的日志记录和过滤功能
